# ПРОЕКТ
# «Организация системы мониторинга сайта на основе Prometheus»

# Цели проекта

 1. Предметное изучение технологий мониторинга, используемых в Prometheus.
 2. Использование полученных знаний и навыков для концептуального формирования системы мониторинга на примере сайта.
 3. Реализация сформированной системы в виртуальной инфраструктуре с использованием технологии контейнеризации.
 4. Осмысление полученного результата и планирование собственного дальнейшего развития в части применений полученных знаний и навыков.

# Что планировалось

 1. Подготовить инфраструктуру для реализации проекта, а именно - в среде vmware развернуть 3 ВМ (cloud, virt1, virt2) c CentOS; установить на каждую ВМ docker, docker-compose; развернуть систему управления контейнерами на базе portainer с единым центром управления контейнерами на virt1.
 2. На cloud развернуть стэк для сайта (контейнеры с wordpress, mysql, nginx), а так же организовать доступ к сайту из вне по адресу https://cloud.cardio32.ru.
 3. На virt2 развернуть стэк для системы мониторинга (контейнеры с prometheus, alertmanager, node-exporter, blackbox-exporter, grafana, telegram-bot), а так же добавить на cloud контейнер с node-exporter.
 4. Выполнить работы по конфигурированию полученного решения.
 5. Разработать дашборды под grafana для визуализации как системного состояния инфраструктуры (cloud и virt2), так и собственно самого сайта.
 6. На virt1 установить систему логгирования (контейнеры loki, promtail, grafana), добавить контейнер promtail на cloud для логирования сайта.
 7. Выполнить конфигурирование системы логгирования, настроить получение логов сайта.
 8. Оценить полученное решение.

# Используемые технологии

1. База временных рядов Prometheus с набором экспортеров и механизмами алертинга по ключевым событиям.
2. Технологии визуализации на базе платформы Grafana c формированием дашбордов на основе метрик.
3. Loki-стэк для сбора логов (promtail, prometheus, grafana).

# Выводы и планы по развитию

Предложенное решение вполне функционально, не требовательно к ресурсам и может быть использовано как основа для формирования системы мониторинга в prod.

Для дальнейшего развития предлагается:
1. Рассмотреть для prod работу с фабриками Prometheus.
2. Использовать полученные навыки при актуализации и доработки системы мониторинга prod (50 хостов – centos, oracle, service…).
3. Реализовать в grafana, на карте объектов, используя механизм drilldown, состояние prod с возможностью детализации по хостам.

# Что получилось

Центр управления на virt1

![Рис1](https://user-images.githubusercontent.com/23739863/222130650-91841355-6a2f-4723-9355-12539679d96c.png)

Контейнеры на cloud

![Рис2](https://user-images.githubusercontent.com/23739863/222143624-0396e165-39b6-4a20-b24f-20861344179b.png)

Сайт (пустая тема на wordpress)

![Рис3](https://user-images.githubusercontent.com/23739863/222143813-6b8729af-0e04-458f-aaf7-05fffb500bdb.png)

Контейнеры на virt2 (мониторинг)

![Рис4](https://user-images.githubusercontent.com/23739863/222144106-36fe638e-c024-4fe5-a958-424b2f7b56dc.png)

Контейнеры на Virt1 (логирование)

![Рис5](https://user-images.githubusercontent.com/23739863/222147326-e138fc01-4ad2-4fd2-9e50-f09acb1e9835.png)

Дашборды системной инфраструктуры и самого сайта

![Рис6](https://user-images.githubusercontent.com/23739863/222147681-dfbb7fed-4fcf-4d35-af75-17042b3fb8ee.png)

![Рис7](https://user-images.githubusercontent.com/23739863/222147801-9789dd57-2268-4ce9-9dc5-b160bac580f4.png)

![Рис8](https://user-images.githubusercontent.com/23739863/222147846-9f534172-3edd-4c79-88f3-ca46aabb0379.png)

Дашборды логирования

![Рис9](https://user-images.githubusercontent.com/23739863/222147990-28c1405d-1fb8-4393-b8db-7107ed39915e.png)

![Рис10](https://user-images.githubusercontent.com/23739863/222148064-fe86aa1e-b1ef-4b3f-9507-340501ef5df5.png)


# Презентация
[Защита проекта.pptx](https://github.com/AndrewGolubin/monitoring_kp/files/10861340/default.pptx)

